<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SKYNET</title>
	<link rel="manifest" href="img/favicons/manifest.json">
	<link rel="shortcut icon" href="img/favicons/favicon.ico">
	<meta name="msapplication-TileColor" content="#00a8ff">
	<meta name="msapplication-config" content="img/favicons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<!-- Normalize -->

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/normalize.css') }}" />
	<!-- Bootstrap -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}" />
	<!-- Owl -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/owl.css') }}" />
	<!-- Animate.css -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/animate.css') }}" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/form.css') }}" />
	<!-- Font Awesome -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='fonts/font-awesome-4.1.0/css/font-awesome.min.css') }}" />
	<!-- Elegant Icons -->
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='fonts/eleganticons/et-icons.css') }}" />
	<!-- Main style -->


<style>
    .border {
    list-style: none;
    padding: 0;
}
.border li {
    font-family: "Trebuchet MS", "Lucida Sans";
    padding: 7px 20px;
    margin-bottom: 10px;
    border-radius: 5px;
    border-left: 10px solid #f05d22;
    box-shadow: 2px -2px 5px 0 rgba(0,0,0,.1),
    -2px -2px 5px 0 rgba(0,0,0,.1),
    2px 2px 5px 0 rgba(0,0,0,.1),
    -2px 2px 5px 0 rgba(0,0,0,.1);
    font-size: 20px;
    letter-spacing: 2px;
    transition: 0.3s all linear;
}
.border li:nth-child(2){border-color: #8bc63e;}
.border li:nth-child(3){border-color: #fcba30;}
.border li:nth-child(4){border-color: #1ccfc9;}
.border li:nth-child(5){border-color: #493224;}
.border li:hover {border-left: 10px solid transparent;}
.border li:nth-child(1):hover {border-right: 10px solid #f05d22;}
.border li:nth-child(2):hover {border-right: 10px solid #8bc63e;}
.border li:nth-child(3):hover {border-right: 10px solid #fcba30;}
.border li:nth-child(4):hover {border-right: 10px solid #1ccfc9;}
.border li:nth-child(5):hover {border-right: 10px solid #493224;}
</style>
</head>

<body>


<div class="container">


    <a href="index.html" >Вернуться на главную</a>
    <h1>Личный кабинет аналитика</h1>
    <a href="#" id="add-step-vision">Добавить этап</a>
    <div id="form-step">
        <form method="post" action="">
              <div class="form-group">
                <label for="exampleInputPassword1"> Идентификатор этапа</label>
                {{ form.id_logic(size=20,class_="form-control") }}
              </div>
              <div class="form-group">
                <label for="exampleInputPassword1"> Родитель этапа </label>
                {{ form.id_parents(size=20,class_="form-control") }}
              </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Ответ пользователю</label>
                 {{ form.response(size=200,class_="form-control") }}
              </div>
             <div class="form-group">
                <label for="exampleInputPassword1">поиск этапа</label>
                 {{ form.template(size=200,class_="form-control") }}
              </div>
            <div class="form-group">
                <label for="exampleInputPassword1">поле для разработчиков</label>
                 {{ form.command(size=200,class_="form-control") }}
              </div>
               <div class="form-group">
                <label for="exampleInputPassword1">Кнопки для пользователя</label>
                 {{ form.button(size=200,class_="form-control") }}
              </div>

             {{ form.submit(class_="btn btn-primary") }}
        </form>
     </div>

    <h1>Список услуг</h1>
     <div class="border">

         {% for log in logic %}
             {% if log.id_parents == head %}
              <li><a class="teg-element" data-teg="{{log.id_logic}}" ><span>
                  {% if log.button != '' %}
                       {{ log.button }}
                  {% else %}
                       {{ log.template }}
                  {% endif %}
                  </span></a>
                  <ul>

                 </ul>
             </li>
             {% endif %}

         {% endfor %}
        </div>

     <table class="table table-sm">
     <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Skill</th>
            <th scope="col">Parents</th>
            <th scope="col">response</th>
            <th scope="col">template</th>
            <th scope="col">button</th>
            <th scope="col">command</th>
            <th scope="col">X</th>
        </tr>
     </thead>
         {% for log in logic %}
             <tr class="element-step">
                  <th scope="row">{{ loop.index }}</th>
                  <td class="element-logic">{{ log.id_logic }}</td>
                  <td class="element-parents" >{{ log.id_parents }}</td>
                  <td>{{ log.response }}</td>
                  <td>{{ log.template }}</td>
                  <td>{{ log.button }}</td>
                  <td>{{ log.command }}</td>
                  <td>
                       <form method="post" action="">
                           {{ delform.id_del(value=log.id_logic) }}
                           {{ delform.deletSub(class_="btn btn-primary") }}
                       </form>
                  </td>
             </tr>
         {% endfor %}
     </table>
</div>


	<!-- Scripts -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/normalize.css') }}" />
	<script src="{{ url_for('static', filename='js/jquery-1.11.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/wow.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/typewriter.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.onepagenav.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/form.js') }}"></script>
    <script>
			$(document).ready(function(){
				$("ul").hide();
				$("a span").click(function(){
					$(this).parent().next().slideToggle();
				});

				 $("#add-step-vision").click(function() {
                     $("#form-step").toggle();
                 });


				  $(".teg-element").click(function() {
                   console.log($(this).data('teg'));
                   var head = $(this).data('teg').toString();
                   arr_head = [];
                   arr_head.push(head);
                   if($("tr").is(".element-step")){
                       var spisok = $( ".element-step");
                       for (var i = 0; i < spisok.length; i++) {
                           spisok[i].style.display = 'block';
                       }
                       for (var i = 0; i < spisok.length; i++) {


                            if( arr_head.indexOf(spisok[i].querySelector('.element-logic').textContent) != -1 ) {
                                 arr_head.push(spisok[i].querySelector('.element-logic').textContent);
                                 spisok[i].style.display = 'none';
                                 console.log(spisok[i]);

                            }
                            else if ( arr_head.indexOf(spisok[i].querySelector('.element-parents').textContent) != -1  ){
                                 arr_head.push(spisok[i].querySelector('.element-logic').textContent);
                                 spisok[i].style.display = "none";
                                 console.log(spisok[i]);
                                }
                        }

                   }


                });

			});
    </script>


</body>

</html>




